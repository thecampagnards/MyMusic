<!DOCTYPE html>
<html ng-app="mymusicApp" lang="fr">
<head>
  <meta charset="utf-8" />
  <title>MyMusic</title>
  <base href="/mymusic/www/" />

  <link rel="icon" type="image/png" href="img/logo.png" />
  <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="bower_components/bootstrap-fileinput/css/fileinput.min.css" />
  <link rel="stylesheet" href="css/main.css" />
</head>

<body ng-controller="mainController" ng-class="{logout: isLogged == false}">
  <nav class="navbar navbar-default" ng-show="isLogged">
    <div class="container">
      <div class="navbar-header">
        <a class="navbar-brand" href="#/">
          <span><img src="img/logo.png" height="30"></span> MyMusic
        </a>
      </div>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="."><i class="fa fa-home"></i> Accueil</a></li>
        <li><a href="musiques"><i class="fa fa-music"></i> Musiques</a></li>
        <li><a href="playlists"><i class="fa fa-list"></i> Playlists</a></li>
        <li><a href="parametre"><i class="fa fa-gears"></i> Paramètres</a></li>
        <li class="dropdown">
          <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><i class="fa fa-power-off"></i> {{ login }}</a>
          <ul class="dropdown-menu">
            <li><a href="#" ng-click="logout()"><i class="fa fa-sign-out"></i> Déconnexion</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left ng-valid ng-dirty" role="search">
        <div class="form-group">
          <input type="text" class="form-control ng-valid ng-dirty" ng-model="search" placeholder="Filtrer les résultats" autofocus="true">
          <span class="glyphicon glyphicon-remove ng-hide" ng-click="search = ''" ng-show="search.length"></span>
        </div>
      </form>
    </div>
  </nav>

  <div id="main">

    <div class="row" ng-show="isLogged">
      <div class="col-md-6">
        <sound-manager></sound-manager>

        <div class="page-header">
          <h2>À l'écoute: {{ currentPlaying.title }} <span ng-if="currentPlaying.artist">de {{ currentPlaying.artist }}</span> <small>{{ currentPostion }} / {{ currentDuration }}</small></h1>
        </div>

        <div class="progress" seek-track>
          <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( progress + '%' ) }">
            {{ currentPostion }}
          </div>
        </div>

        <div class="btn-group" role="group">
          <button play-music ng-show="!isPlaying" class="btn btn-default"><span class="glyphicon glyphicon-play" aria-hidden="true"></span></button>
          <button pause-music ng-show="isPlaying" class="btn btn-default"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>
          <button stop-music ng-show="isPlaying" class="btn btn-default"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span></button>
          <button prev-track class="btn btn-default"><span class="glyphicon glyphicon-step-backward" aria-hidden="true"></span></button>
          <button next-track class="btn btn-default"><span class="glyphicon glyphicon-step-forward" aria-hidden="true"></span></button>
          <button repeat-music class="btn btn-default" ng-class="{disabled: !repeat}"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span></button>
        </div>

        <div class="btn-group" role="group">
          <a class="btn btn-default disabled">Volume: {{ volume }}</a>
          <button music-volume data-type="decrease" class="btn btn-default"><span class="glyphicon glyphicon-volume-down" aria-hidden="true"></span></button>
          <button music-volume data-type="increase" class="btn btn-default"><span class="glyphicon glyphicon-volume-up" aria-hidden="true"></button>
          <button mute-music class="btn btn-default" ng-class="{disabled: !mute}"><span class="glyphicon glyphicon-volume-off" aria-hidden="true"></button>
        </div>

        <div class="btn-group" role="group">
          <button clear-playlist class="btn btn-default"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></button>
          <button mix-playlist class="btn btn-default"><span class="glyphicon glyphicon-random" aria-hidden="true"></button>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title clearfix"><span class="pull-left">Playlist</span></h3>
          </div>
          <table class="table table-condensed table-striped">
            <tbody>
              <tr class="clickable-row" ng-repeat="musique in playlist">
                <td play-from-playlist="musique"><a href="#">{{ musique.title }}</a><span ng-if="currentPlaying.id == musique.id"> <small>(actuelle)</small></span></td>

                <td>{{ musique.length | secondsToDateTime | date:'mm:ss' }}</td>
                <td remove-from-playlist="musique" data-index="{{$index}}">
                  <small><span class="glyphicon glyphicon-remove" aria-hidden="true"></small>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div ng-view></div>
</div>

  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="bower_components/angular/angular.min.js"></script>
  <script src="bower_components/angular-route/angular-route.min.js"></script>
  <script src="bower_components/angular-bootstrap/ui-bootstrap.js"></script>
  <script src="bower_components/angular-soundmanager2/dist/angular-soundmanager2.min.js"></script>
  <script src="bower_components/bootstrap-fileinput/js/fileinput.min.js"></script>
  <script src="bower_components/bootstrap-fileinput/js/locales/fr.js"></script>

  <script src="js/app.js"></script>
  <script src="js/directives/directives.js"></script>
  <script src="js/filters/filters.js"></script>
  <script src="js/services/services.js"></script>
  <script src="js/controllers/main.js"></script>
  <script src="js/controllers/home.js"></script>
  <script src="js/controllers/musique.js"></script>
  <script src="js/controllers/playlist.js"></script>

</body>
</html>
